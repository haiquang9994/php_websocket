(()=>{function a(a,d=!1){let b=Math.random().toString(36).substring(2,11)+Math.random().toString(36).substring(2,11)+Math.random().toString(36).substring(2,11),e,f=[],g=[],h=0,i={},j;function k(b){if(d){let c=b.length,e=new Uint8Array(c);for(let a=0;a<c;a++)e[a]=b.charCodeAt(a);return e.buffer}return b}function c(a){(e=new WebSocket(a)).binaryType="arraybuffer",e.onopen=b=>{let a=g.shift();for(;a;)e.send(k(a)),a=g.shift();j=setInterval(()=>{e.send(k(""+h++))},15e3)},e.onmessage=g=>{try{let a=g.data;a instanceof ArrayBuffer&&(a=new TextDecoder().decode(a));let b=JSON.parse(a);if(!(b instanceof Array))return;if(3===b.length){let[,h,k]=b;(f[h]||[]).forEach(a=>{"function"==typeof a&&a.call(e,k)})}else{let[c,j]=b,d=i[c];delete i[c],"function"==typeof d&&d.call(null,j)}}catch(l){}},e.onclose=()=>{clearInterval(j),setTimeout(()=>c(a),2e3)}}c(function(f){let a={},c=f.split("#")[0].split("?"),g=c[0].replace("http","ws"),h=c[1]||"";h.split("&").map(a=>a.split("=")).filter(a=>2===a.length).forEach(b=>{a[b[0]]=b[1]}),a.sid=b;let d=[];for(let e in a){let i=a[e];d.push(`${e}=${i}`)}return g+"?"+d.join("&")}(a)),this.id=b,this.on=(c,d)=>{var a,b;a=c,b=d,f[a]||(f[a]=[]),f[a].push(b)},this.emit=(a,b,c)=>{!function(b,c,d){let a=JSON.stringify([h,b,c]);i[h++]=d,e&&1===e.readyState?e.send(k(a)):g.push(a)}(a,b,c)}}window.WSClient=a})()